!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_inactive",inputErrorClass:"-error",errorClass:"modal__input-error"},t=(e,t,o)=>{const r=t.id+"-error",n=e.querySelector("#"+r);n.textContent="",n.classList.remove(o.errorClass)},o=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?(t.classList.add(o.inactiveButtonClass),t.disabled=!0):(t.classList.remove(o.inactiveButtonClass),t.disabled=!1)};new class{constructor(e){}getInitialCards(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"db75981d-07ca-4023-b69b-008231c3f1fd"}}).then(e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"db75981d-07ca-4023-b69b-008231c3f1fd","Content-Type":"application/json"}}).getInitialCards().then(e=>{console.log("Cards from server:",e),e.forEach(e=>{const t=L(e);n.append(t)})}).catch(e=>{console.error(e)}),function(r=e){document.querySelectorAll(r.formSelector).forEach(n=>{((r,n)=>{const c=Array.from(r.querySelectorAll(n.inputSelector)),l=r.querySelector(n.submitButtonSelector);o(c,l,n),c.forEach(a=>{a.addEventListener("input",()=>{((o,r,n)=>{r.validity.valid?r.validity.valid&&t(o,r,n):((t,o,r,n=e)=>{const c=o.id+n.inputErrorClass,l=t.querySelector("#"+c);l.textContent=r,l.classList.add(n.errorClass)})(o,r,r.validationMessage,n)})(r,a,n),o(c,l,n)})})})(n,r)})}(e);const r=document.querySelector("#card-template"),n=document.querySelector(".cards__list");function c(e){e.classList.add("modal_is-opened"),j()}function l(e){e.classList.remove("modal_is-opened"),A()}const a=document.querySelector("#profile-edit-modal"),i=document.querySelector(".profile__edit-button"),d=a.querySelector(".modal__close-btn"),s=a.querySelector(".modal-background"),u=document.querySelector("#profile-name-input"),m=document.querySelector("#profile-description-input"),_=document.querySelector(".profile__name"),v=document.querySelector(".profile__description"),p=a.querySelector(".modal__form");i.addEventListener("click",()=>{u.value=_.textContent,m.value=v.textContent,c(a),function(o,r,n=e){r.forEach(e=>{t(o,e,n)})}(p,[u,m],e)}),d.addEventListener("click",()=>l(a)),s.addEventListener("click",()=>l(a)),p.addEventListener("submit",function(e){e.preventDefault(),_.textContent=u.value,v.textContent=m.value,l(a)});const y=document.querySelector("#post-new-modal"),S=document.querySelector(".profile__add-button"),q=y.querySelector(".modal__close-btn"),f=y.querySelector(".modal-background"),b=(y.querySelector(".modal__save-btn"),document.querySelector(".card__image"),document.querySelector(".card__content-title"),document.querySelector("#new-post-image-link-input")),k=document.querySelector("#new-post-caption-input"),E=y.querySelector(".modal__form");function L(e){const t=r.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__content-title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name;const l=t.querySelector(".card__content-like-button");return l.addEventListener("click",()=>{l.classList.toggle("card__content-like-button_active")}),t.querySelector(".card__delete-button").addEventListener("click",()=>{t.remove()}),n.addEventListener("click",()=>{w.src=e.link,w.alt=e.name,x.textContent=e.name,c(C)}),t}S.addEventListener("click",()=>{c(y)}),q.addEventListener("click",()=>l(y)),f.addEventListener("click",()=>l(y)),E.addEventListener("submit",function(t){t.preventDefault();const r=L({link:b.value,name:k.value});n.prepend(r),t.target.reset(),o([b,k],t.submitter,e),l(y)});const C=document.querySelector("#preview-modal"),g=C.querySelector(".modal__close-btn_preview"),h=C.querySelector(".modal-background"),w=C.querySelector(".modal__image-preview"),x=C.querySelector(".modal__preview-title");function B(e){"Escape"===e.key&&l(document.querySelector(".modal_is-opened"))}g.addEventListener("click",()=>l(C)),h.addEventListener("click",()=>l(C));const j=()=>{document.addEventListener("keydown",B)},A=()=>{document.removeEventListener("keydown",B)}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0wsV0FBWkEsRUFBSWdDLEtBRU45QyxFQURjZixTQUFTdkMsY0FBYyxvQkFHekMsQ0FaQWlHLEVBQXFCckQsaUJBQWlCLFFBQVMsSUFBTVUsRUFBV3FDLElBRWhFTyxFQUF1QnRELGlCQUFpQixRQUFTLElBQy9DVSxFQUFXcUMsSUFXYixNQUFNdEMsRUFBa0JBLEtBQ3RCZCxTQUFTSyxpQkFBaUIsVUFBV3VELElBR2pDNUMsRUFBeUJBLEtBQzdCaEIsU0FBUzhELG9CQUFvQixVQUFXRixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbmZpZ3VyYXRpb24gb2JqZWN0XG5jb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ0bl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwiLWVycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChcbiAgZm9ybUVsZW1lbnQsXG4gIGlucHV0RWxlbWVudCxcbiAgaW5wdXRFcnJvck1lc3NhZ2UsXG4gIGNvbmZpZyA9IHNldHRpbmdzXG4pID0+IHtcbiAgY29uc3QgZXJyb3JNc2dJZCA9IGlucHV0RWxlbWVudC5pZCArIGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XG4gIGNvbnN0IGVycm9yTXNnRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjXCIgKyBlcnJvck1zZ0lkKTtcbiAgZXJyb3JNc2dFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFcnJvck1lc3NhZ2U7XG4gIGVycm9yTXNnRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5lcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IHJlbW92ZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnSWQgPSBpbnB1dEVsZW1lbnQuaWQgKyBcIi1lcnJvclwiO1xuICBjb25zdCBlcnJvck1zZ0VsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiICsgZXJyb3JNc2dJZCk7XG4gIGVycm9yTXNnRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIGVycm9yTXNnRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICByZW1vdmVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcilcbiAgKTtcbiAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKGNvbmZpZyA9IHNldHRpbmdzKSB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlc2V0VmFsaWRhdGlvbihmb3JtRWxlbWVudCwgaW5wdXRMaXN0LCBjb25maWcgPSBzZXR0aW5ncykge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICByZW1vdmVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dCwgY29uZmlnKTtcbiAgfSk7XG59XG5cbi8vIGVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuXG5leHBvcnQgeyBlbmFibGVWYWxpZGF0aW9uLCByZXNldFZhbGlkYXRpb24sIHNldHRpbmdzLCB0b2dnbGVCdXR0b25TdGF0ZSB9O1xuIiwiaW1wb3J0IEFwaSBmcm9tIFwiLi4vc2NyaXB0cy9BcGkuanNcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5cbmltcG9ydCB7XG4gIGVuYWJsZVZhbGlkYXRpb24sXG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG4gIHRvZ2dsZUJ1dHRvblN0YXRlLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImRiNzU5ODFkLTA3Y2EtNDAyMy1iNjliLTAwODIzMWMzZjFmZFwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgLnRoZW4oKGNhcmRzRnJvbVNlcnZlcikgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiQ2FyZHMgZnJvbSBzZXJ2ZXI6XCIsIGNhcmRzRnJvbVNlcnZlcik7XG4gICAgY2FyZHNGcm9tU2VydmVyLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtID0gZ2V0Q2FyZEVsZW1lbnQoZWxlbWVudCk7XG4gICAgICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtKTtcbiAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gIH0pO1xuXG4vLyBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuLy8gICBjb25zdCBjYXJkRWxlbSA9IGdldENhcmRFbGVtZW50KGVsZW1lbnQpO1xuLy8gICBjYXJkc0xpc3QuYXBwZW5kKGNhcmRFbGVtKTtcbi8vIH0pO1xuXG4vLyBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4vLyAgIHtcbi8vICAgICAvLyBleGFtcGxlIGNhcmRcbi8vICAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIEJyaWRnZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy83LXBob3RvLWJ5LWdyaWZmaW4td29vbGRyaWRnZS1mcm9tLXBleGVscy5qcGdcIixcbi8vICAgfSxcblxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8xLXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbi8vICAgfSxcblxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuLy8gICB9LFxuXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4vLyAgIH0sXG5cbi8vICAge1xuLy8gICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QgYW5kIHRocm91Z2ggdGhlIHRyZWVzXCIsXG4vLyAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuLy8gICB9LFxuXG4vLyAgIHtcbi8vICAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcbi8vICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcbi8vICAgfSxcblxuLy8gICB7XG4vLyAgICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbi8vICAgfSxcblxuLy8gICB7XG4vLyAgICAgLy8gYWRkaXRpb25hbCBjYXJkXG4vLyAgICAgbmFtZTogXCJhIHBlcnNvbiBzdGFja2luZyByb2NrcyBvbiB0b3Agb2YgZWFjaCBvdGhlclwiLFxuLy8gICAgIGxpbms6IFwiaHR0cHM6Ly91bnNwbGFzaC5jb20vcGhvdG9zL2EtcGVyc29uLXN0YWNraW5nLXJvY2tzLW9uLXRvcC1vZi1lYWNoLW90aGVyLVJGRnpscUJTbVJ3XCIsXG4vLyAgIH0sXG4vLyBdO1xuXG4vLyBrZWVwIGFuIGV5ZSBvbiB0aGlzIGxpbmVcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIik7XG5cbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbi8vb3BlbiAmIGNsb3NpbmcgZnVuY3Rpb25zXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgbGlzdGVuRm9yRXNjYXBlKCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgc3RvcExpc3RlbmluZ0ZvckVzY2FwZSgpO1xufVxuXG4vL2VkaXQgcHJvZmlsZSBtb2RhbFxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuXG5jb25zdCBlZGl0UHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5cbmNvbnN0IGVkaXRQcm9maWxlQ2xvc2VCdG4gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcblxuY29uc3QgZWRpdFByb2ZpbGVCYWNrZ3JvdW5kID1cbiAgZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJhY2tncm91bmRcIik7XG5cbmNvbnN0IGVkaXRQcm9maWxlTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5cbmNvbnN0IGVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3QgcHJvZmlsZU5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxuKTtcblxuY29uc3QgZWRpdFByb2ZpbGVGb3JtID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG5mdW5jdGlvbiBzdWJtaXRFZGl0UHJvZmlsZU1vZGFsKGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZWRpdFByb2ZpbGVOYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59XG5cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50O1xuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBlZGl0UHJvZmlsZUZvcm0sXG4gICAgW2VkaXRQcm9maWxlTmFtZUlucHV0LCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXRdLFxuICAgIHNldHRpbmdzXG4gICk7XG59KTtcblxuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKVxuKTtcblxuZWRpdFByb2ZpbGVCYWNrZ3JvdW5kLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpXG4pO1xuXG5lZGl0UHJvZmlsZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzdWJtaXRFZGl0UHJvZmlsZU1vZGFsKTtcblxuLy9uZXcgcG9zdCBtb2RhbFxuY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3N0LW5ldy1tb2RhbFwiKTtcblxuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcblxuY29uc3QgbmV3UG9zdEJhY2tncm91bmQgPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1iYWNrZ3JvdW5kXCIpO1xuXG5jb25zdCBuZXdQb3N0U2F2ZUJ0biA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcblxuY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG5cbmNvbnN0IGNhcmRDb250ZW50VGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jb250ZW50LXRpdGxlXCIpOyAvL3N1Yi1jbGFzcyBvZiBjYXJkX19jb250ZW50XG5cbmNvbnN0IG5ld1Bvc3RJbWFnZUxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI25ldy1wb3N0LWltYWdlLWxpbmstaW5wdXRcIlxuKTtcbmNvbnN0IG5ld1Bvc3RJbWFnZUNhcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI25ldy1wb3N0LWNhcHRpb24taW5wdXRcIlxuKTtcblxuY29uc3QgbmV3UG9zdEZvcm0gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxubmV3UG9zdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwobmV3UG9zdE1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0Q2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKSk7XG5cbm5ld1Bvc3RCYWNrZ3JvdW5kLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCkpO1xuXG5mdW5jdGlvbiBzdWJtaXROZXdQb3N0TW9kYWwoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IGNhcmRJbnB1dHMgPSB7XG4gICAgbGluazogbmV3UG9zdEltYWdlTGlua0lucHV0LnZhbHVlLFxuICAgIG5hbWU6IG5ld1Bvc3RJbWFnZUNhcHRpb25JbnB1dC52YWx1ZSxcbiAgfTtcblxuICBjb25zdCBuZXdDYXJkID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZElucHV0cyk7XG5cbiAgY2FyZHNMaXN0LnByZXBlbmQobmV3Q2FyZCk7XG5cbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKFxuICAgIFtuZXdQb3N0SW1hZ2VMaW5rSW5wdXQsIG5ld1Bvc3RJbWFnZUNhcHRpb25JbnB1dF0sXG4gICAgZXZ0LnN1Ym1pdHRlcixcbiAgICBzZXR0aW5nc1xuICApO1xuXG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn1cblxubmV3UG9zdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzdWJtaXROZXdQb3N0TW9kYWwpO1xuXG4vLyBwcmltYXJ5IGZ1bmN0aW9uXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZFRpdGxlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NvbnRlbnQtdGl0bGVcIik7XG4gIGNvbnN0IGNhcmRJbWFnZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG5cbiAgY29uc3QgY2FyZExpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIFwiLmNhcmRfX2NvbnRlbnQtbGlrZS1idXR0b25cIlxuICApO1xuXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2NvbnRlbnQtbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9KTtcblxuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xuXG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBtb2RhbFByZXZpZXdJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgbW9kYWxQcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIG1vZGFsUHJldmlld1RpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChtb2RhbFByZXZpZXcpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbi8vIGluaXRpYWxDYXJkcy5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4vLyAgIGNvbnN0IGNhcmRFbGVtID0gZ2V0Q2FyZEVsZW1lbnQoZWxlbWVudCk7XG4vLyAgIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsZW0pO1xuLy8gfSk7XG5cbmNvbnN0IG1vZGFsUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcblxuY29uc3QgbW9kYWxQcmV2aWV3Q2xvc2VCdG4gPSBtb2RhbFByZXZpZXcucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ0bl9wcmV2aWV3XCJcbik7XG5cbmNvbnN0IG1vZGFsUHJldmlld0JhY2tncm91bmQgPSBtb2RhbFByZXZpZXcucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1iYWNrZ3JvdW5kXCIpO1xuXG5jb25zdCBtb2RhbFByZXZpZXdJbWFnZSA9IG1vZGFsUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1wcmV2aWV3XCIpO1xuXG5jb25zdCBtb2RhbFByZXZpZXdUaXRsZSA9IG1vZGFsUHJldmlldy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LXRpdGxlXCIpO1xuXG5tb2RhbFByZXZpZXdDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChtb2RhbFByZXZpZXcpKTtcblxubW9kYWxQcmV2aWV3QmFja2dyb3VuZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgY2xvc2VNb2RhbChtb2RhbFByZXZpZXcpXG4pO1xuXG4vLyBrZXlkb3duIG9uIGVzY2FwZVxuZnVuY3Rpb24gZXNjYXBlS2V5RG93bihldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfaXMtb3BlbmVkXCIpO1xuICAgIGNsb3NlTW9kYWwobW9kYWwpO1xuICB9XG59XG5cbmNvbnN0IGxpc3RlbkZvckVzY2FwZSA9ICgpID0+IHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgZXNjYXBlS2V5RG93bik7XG59O1xuXG5jb25zdCBzdG9wTGlzdGVuaW5nRm9yRXNjYXBlID0gKCkgPT4ge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBlc2NhcGVLZXlEb3duKTtcbn07XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzXCIsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJkYjc1OTgxZC0wN2NhLTQwMjMtYjY5Yi0wMDgyMzFjM2YxZmRcIixcbiAgICAgIH0sXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGVycm9yLCByZWplY3QgdGhlIHByb21pc2VcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcGk7XG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInJlbW92ZUlucHV0RXJyb3IiLCJmb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImNvbmZpZyIsImVycm9yTXNnSWQiLCJpZCIsImVycm9yTXNnRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiYWRkIiwiZGlzYWJsZWQiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJiYXNlVXJsIiwiY2FyZHNGcm9tU2VydmVyIiwiY29uc29sZSIsImxvZyIsImZvckVhY2giLCJlbGVtZW50IiwiY2FyZEVsZW0iLCJnZXRDYXJkRWxlbWVudCIsImNhcmRzTGlzdCIsImFwcGVuZCIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImlucHV0RXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2FyZFRlbXBsYXRlIiwib3Blbk1vZGFsIiwibW9kYWwiLCJsaXN0ZW5Gb3JFc2NhcGUiLCJjbG9zZU1vZGFsIiwic3RvcExpc3RlbmluZ0ZvckVzY2FwZSIsImVkaXRQcm9maWxlTW9kYWwiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImVkaXRQcm9maWxlQ2xvc2VCdG4iLCJlZGl0UHJvZmlsZUJhY2tncm91bmQiLCJlZGl0UHJvZmlsZU5hbWVJbnB1dCIsImVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVOYW1lRWxlbWVudCIsInByb2ZpbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJlZGl0UHJvZmlsZUZvcm0iLCJ2YWx1ZSIsImlucHV0IiwicmVzZXRWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0QnV0dG9uIiwibmV3UG9zdENsb3NlQnRuIiwibmV3UG9zdEJhY2tncm91bmQiLCJuZXdQb3N0SW1hZ2VMaW5rSW5wdXQiLCJuZXdQb3N0SW1hZ2VDYXB0aW9uSW5wdXQiLCJuZXdQb3N0Rm9ybSIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGVFbCIsImNhcmRJbWFnZUVsIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJjYXJkTGlrZUJ1dHRvbiIsInRvZ2dsZSIsIm1vZGFsUHJldmlld0ltYWdlIiwibW9kYWxQcmV2aWV3VGl0bGUiLCJtb2RhbFByZXZpZXciLCJuZXdDYXJkIiwicHJlcGVuZCIsInRhcmdldCIsInJlc2V0Iiwic3VibWl0dGVyIiwibW9kYWxQcmV2aWV3Q2xvc2VCdG4iLCJtb2RhbFByZXZpZXdCYWNrZ3JvdW5kIiwiZXNjYXBlS2V5RG93biIsImtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9